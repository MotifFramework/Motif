/*!
 * Motif Scroll Patrol v0.1.0
 * A basic navigation scroll "spy" built on Motif Herald
 * http://getmotif.com
 * 
 * @author Jonathan Pacheco <jonathan@lifeblue.com>
 */
!function(a,b,c,d){"use strict";var e=function(b){this.$elem=a(b),this.elem=this.$elem[0]},f=a(c);e.prototype={defaults:{ignore:!1,topOffset:null,bottomOffset:null,minWidth:!1,currentClass:"is-current",offset:0,window:a(b)},init:function(a){return this.$elem.length?(this.initVars.call(this,a),this.getTargets.call(this),this.bindLinks.call(this),this.initScrollFire.call(this),this):void 0},initVars:function(b){this.config=b,this.metadata=this.$elem.data("scroll-patrol-options"),this.options=a.extend(!0,{},this.defaults,this.config,this.metadata),this.$window=this.options.window,this.$links=this.$elem.find("a"),this.targets=[],this.scrollFireEvents=[]},getTargets:function(){var b=this;return b.$links.each(function(){var c=a(this),d=a(c.attr("href"));d.length&&b.targets.push({identity:d.attr("id"),link:c,target:d})}),b.targets},bindLinks:function(){var a,b=this;for(a=b.targets.length-1;a>=0;a-=1)b.bindEvents.call(b,b.targets[a]),b.buildEvents.call(b,b.targets[a])},bindEvents:function(a){var b=this;f.on("scroll-patrol/"+a.identity+"/top",function(c,d){b.topEvent.call(b,a.link,d)}),f.on("scroll-patrol/"+a.identity+"/bottom",function(c,d){b.bottomEvent.call(b,a.link,d)})},buildEvents:function(a){var b=this,c={trigger:function(){return b.getTopPosition.call(b,a.target)},event:function(b){f.trigger("scroll-patrol/"+a.identity+"/top",[b])},repeat:!0},d={trigger:function(){return b.getBottomPosition.call(b,a.target)},event:function(b){f.trigger("scroll-patrol/"+a.identity+"/bottom",[b])},repeat:!0};return b.scrollFireEvents.push(c,d),b.scrollFireEvents},getTopPosition:function(a){return"function"==typeof this.options.topOffset?this.options.topOffset.call(this):a.offset().top-this.options.offset},topEvent:function(a,b){this.options.minWidth&&this.$window.width()>=this.options.minWidth?"down"===b?this.makeActive.call(this,a):"up"===b&&this.makeInactive.call(this,a):this.makeInactive.call(this,a)},makeActive:function(a){a.addClass(this.options.currentClass)},makeInactive:function(a){a.removeClass(this.options.currentClass)},getBottomPosition:function(a){return"function"==typeof this.options.bottomOffset?this.options.bottomOffset.call(this):a.offset().top+a.outerHeight()-this.options.offset},bottomEvent:function(a,b){this.options.minWidth&&this.$window.width()>=this.options.minWidth?"up"===b?this.makeActive.call(this,a):"down"===b&&this.makeInactive.call(this,a):this.makeInactive.call(this,a)},initScrollFire:function(){var a=this;a.$elem.plugin("scrollFire",{window:this.$window,events:a.scrollFireEvents})}},e.defaults=e.prototype.defaults,d.apps.ScrollPatrol=e}(jQuery,window,document,window.LB=window.LB||{utils:{},apps:{}}),$.createPlugin("scrollPatrol",window.LB.apps.ScrollPatrol);